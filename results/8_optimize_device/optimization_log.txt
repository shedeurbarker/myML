2025-09-23 03:57:42,436 - INFO - === DEVICE PARAMETER OPTIMIZATION ===
2025-09-23 03:57:42,437 - INFO - Log file: results/8_optimize_device/optimization_log.txt
2025-09-23 03:57:42,437 - INFO - 
=== Step 1: Loading Example Parameters ===
2025-09-23 03:57:42,438 - INFO - Loaded example parameters from: example_device_parameters.json
2025-09-23 03:57:42,438 - INFO - Device Type: Perovskite Solar Cell (PCBM/MAPI/PEDOT)
2025-09-23 03:57:42,439 - INFO - 
=== Step 2: Loading Optimization Models ===
2025-09-23 03:57:43,732 - INFO - Loaded optimization models and feature definitions
2025-09-23 03:57:43,732 - INFO - 
=== Step 3: Validating Original Parameters ===
2025-09-23 03:57:43,732 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:43,733 - INFO - Original parameters validation: All physics constraints satisfied
2025-09-23 03:57:43,733 - INFO - 
=== Step 4: Optimizing Parameters (Method: local) ===
2025-09-23 03:57:43,733 - INFO - Progress counter: ENABLED (update every 5 iterations)
2025-09-23 03:57:43,733 - INFO - 
=== Starting Parameter Optimization ===
2025-09-23 03:57:43,733 - INFO - Method: local, Max iterations: 3
2025-09-23 03:57:43,734 - INFO - Converted L1_L bounds from nm to meters: [2e-08, 5.0000000000000004e-08]
2025-09-23 03:57:43,734 - INFO - Converted L2_L bounds from nm to meters: [2.1e-07, 3.5000000000000004e-07]
2025-09-23 03:57:43,734 - INFO - Converted L3_L bounds from nm to meters: [2e-08, 5.0000000000000004e-08]
2025-09-23 03:57:43,734 - INFO - Loaded bounds for 15 parameters
2025-09-23 03:57:43,736 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 03:57:43,764 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 03:57:43,830 - INFO - PCE prediction (0.98%) is within S-Q limit (33.7%) [VALID]
2025-09-23 03:57:43,842 - INFO - Original Performance - MPP: 9.8015 W/cm², PCE: 0.98%
2025-09-23 03:57:43,842 - INFO - Original Recombination: 1.65e+30
2025-09-23 03:57:43,842 - INFO - 
--- Local Optimization (L-BFGS-B) ---
2025-09-23 03:57:43,855 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:43,856 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 03:57:43,881 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 03:57:43,920 - INFO - PCE prediction (0.98%) is within S-Q limit (33.7%) [VALID]
2025-09-23 03:57:43,923 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:43,924 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 03:57:43,940 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 03:57:43,978 - INFO - PCE prediction (1.00%) is within S-Q limit (33.7%) [VALID]
2025-09-23 03:57:43,980 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:43,982 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 03:57:43,998 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 03:57:44,053 - INFO - PCE prediction (0.98%) is within S-Q limit (33.7%) [VALID]
2025-09-23 03:57:44,056 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,115 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,174 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,232 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,291 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,364 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,431 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,490 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,548 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,601 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,685 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,753 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,830 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,904 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:44,965 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,021 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,074 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,132 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,198 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,262 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,316 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,379 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,431 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,503 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,570 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,651 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,763 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,834 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,902 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:45,976 - INFO - Local optimization successful. Objective: -144.085220
2025-09-23 03:57:45,977 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 03:57:46,033 - INFO - 
=== Optimization Results ===
2025-09-23 03:57:46,033 - INFO - Optimized Performance - MPP: 145.0912 W/cm², PCE: 14.51%
2025-09-23 03:57:46,035 - INFO - Optimized Recombination: 1.51e+30
2025-09-23 03:57:46,035 - INFO - Physics Validation: All physics constraints satisfied
2025-09-23 03:57:46,035 - INFO - Improvements - MPP: +1380.29%, PCE: +1380.29%, Recombination: -8.21%
2025-09-23 03:57:46,035 - INFO - 
=== Step 5: Creating Optimization Visualizations ===
2025-09-23 03:57:50,918 - INFO - Created optimization table: results/8_optimize_device/6_optimization_table.png
2025-09-23 03:57:50,919 - INFO - Created optimization visualizations in results/8_optimize_device/
2025-09-23 03:57:50,919 - INFO - 
=== Step 6: Saving Optimization Results ===
2025-09-23 03:57:50,922 - INFO - Created ready-to-use format: example_device_parameters_optimized.json
2025-09-23 03:57:50,922 - INFO - To test: cp results/8_optimize_device/example_device_parameters_optimized.json example_device_parameters.json
2025-09-23 03:57:50,923 - INFO - Optimization results saved to results/8_optimize_device/
2025-09-23 03:57:50,923 - INFO - Optimized parameters: optimized_device_parameters.json
2025-09-23 03:57:50,923 - INFO - Detailed report: optimization_report.json
2025-09-23 03:57:50,923 - INFO - Ready-to-use format: example_device_parameters_optimized.json
2025-09-23 03:57:50,923 - INFO - 
=== OPTIMIZATION COMPLETE ===
2025-09-23 03:57:50,924 - INFO - Results saved to: results/8_optimize_device/
2025-09-23 03:57:50,924 - INFO - Optimized Parameters: optimized_device_parameters.json
2025-09-23 03:57:50,924 - INFO - Optimization Report: optimization_report.json
2025-09-23 03:57:50,924 - INFO - Performance Comparison: 1_optimization_comparison.png
2025-09-23 03:57:50,924 - INFO - Thickness Optimization: 2_thickness_optimization.png
2025-09-23 03:57:50,925 - INFO - Energy Optimization: 3_energy_optimization.png
2025-09-23 03:57:50,925 - INFO - Doping Optimization: 4_doping_optimization.png
2025-09-23 03:57:50,925 - INFO - Improvements Summary: 5_performance_improvements.png
2025-09-23 03:57:50,925 - INFO - Comprehensive Table: 6_optimization_table.png
2025-09-23 03:57:50,925 - INFO - 
=== PERFORMANCE IMPROVEMENTS ===
2025-09-23 03:57:50,925 - INFO - MPP: +1380.29%
2025-09-23 03:57:50,925 - INFO - PCE: +1380.29%
2025-09-23 03:57:50,925 - INFO - Recombination: -8.21%
2025-09-23 03:57:50,925 - INFO - Status: Device optimization successful and manufacturable!

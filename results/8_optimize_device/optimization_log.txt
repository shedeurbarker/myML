2025-09-23 04:17:12,940 - INFO - === DEVICE PARAMETER OPTIMIZATION ===
2025-09-23 04:17:12,940 - INFO - Log file: results/8_optimize_device/optimization_log.txt
2025-09-23 04:17:12,940 - INFO - 
=== Step 1: Loading Example Parameters ===
2025-09-23 04:17:12,941 - INFO - Loaded example parameters from: example_device_parameters.json
2025-09-23 04:17:12,941 - INFO - Device Type: Perovskite Solar Cell (PCBM/MAPI/PEDOT)
2025-09-23 04:17:12,941 - INFO - 
=== Step 2: Loading Optimization Models ===
2025-09-23 04:17:13,590 - INFO - Loaded optimization models and feature definitions
2025-09-23 04:17:13,590 - INFO - 
=== Step 3: Validating Original Parameters ===
2025-09-23 04:17:13,590 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:13,590 - INFO - Original parameters validation: All physics constraints satisfied
2025-09-23 04:17:13,591 - INFO - 
=== Step 4: Optimizing Parameters (Method: both) ===
2025-09-23 04:17:13,591 - INFO - Progress counter: ENABLED (update every 5 iterations)
2025-09-23 04:17:13,591 - INFO - 
=== Starting Parameter Optimization ===
2025-09-23 04:17:13,591 - INFO - Method: both, Max iterations: 100
2025-09-23 04:17:13,592 - INFO - Converted L1_L bounds from nm to meters: [2e-08, 5.0000000000000004e-08]
2025-09-23 04:17:13,592 - INFO - Converted L2_L bounds from nm to meters: [2.1e-07, 3.5000000000000004e-07]
2025-09-23 04:17:13,592 - INFO - Converted L3_L bounds from nm to meters: [2e-08, 5.0000000000000004e-08]
2025-09-23 04:17:13,592 - INFO - Loaded bounds for 15 parameters
2025-09-23 04:17:13,593 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 04:17:13,607 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 04:17:13,649 - INFO - PCE prediction (0.98%) is within S-Q limit (33.7%) [VALID]
2025-09-23 04:17:13,651 - INFO - Original Performance - MPP: 9.8015 W/cm², PCE: 0.98%
2025-09-23 04:17:13,651 - INFO - Original Recombination: 1.65e+30
2025-09-23 04:17:13,651 - INFO - 
--- Local Optimization (L-BFGS-B) ---
2025-09-23 04:17:13,652 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:13,653 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 04:17:13,666 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 04:17:13,706 - INFO - PCE prediction (0.98%) is within S-Q limit (33.7%) [VALID]
2025-09-23 04:17:13,708 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:13,708 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 04:17:13,722 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 04:17:13,773 - INFO - PCE prediction (1.00%) is within S-Q limit (33.7%) [VALID]
2025-09-23 04:17:13,775 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:13,775 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 04:17:13,789 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 04:17:13,830 - INFO - PCE prediction (0.98%) is within S-Q limit (33.7%) [VALID]
2025-09-23 04:17:13,832 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:13,887 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:13,939 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,011 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,070 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,127 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,191 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,250 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,311 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,362 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,421 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,478 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,543 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,608 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,667 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,730 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,785 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,840 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,902 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:14,966 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,033 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,143 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,208 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,277 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,342 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,398 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,464 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,540 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,618 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:15,678 - INFO - Local optimization successful. Objective: -144.085220
2025-09-23 04:17:15,678 - INFO - 
--- Global Optimization (Differential Evolution) ---
2025-09-23 04:17:15,680 - WARNING - W_R (5.2) slightly > HTL E_v (5.184) - within tolerance
2025-09-23 04:17:15,681 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-23 04:17:15,696 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-23 04:17:15,740 - INFO - PCE prediction (17.04%) is within S-Q limit (33.7%) [VALID]
2025-09-23 04:17:15,742 - WARNING - W_R (5.2) slightly > HTL E_v (5.160) - within tolerance
2025-09-23 04:17:15,797 - WARNING - W_R (5.2) slightly > HTL E_v (5.163) - within tolerance
2025-09-23 04:17:15,850 - WARNING - W_R (5.2) slightly > HTL E_v (5.174) - within tolerance
2025-09-23 04:17:15,907 - WARNING - W_R (5.2) slightly > HTL E_v (5.182) - within tolerance
2025-09-23 04:17:15,972 - WARNING - W_R (5.2) slightly > HTL E_v (5.107) - within tolerance
2025-09-23 04:17:16,026 - WARNING - W_R (5.2) slightly > HTL E_v (5.110) - within tolerance
2025-09-23 04:17:16,082 - WARNING - W_R (5.2) slightly > HTL E_v (5.170) - within tolerance
2025-09-23 04:17:16,146 - WARNING - W_R (5.2) slightly > HTL E_v (5.145) - within tolerance
2025-09-23 04:17:16,204 - WARNING - W_R (5.2) slightly > HTL E_v (5.147) - within tolerance
2025-09-23 04:17:16,261 - WARNING - W_R (5.2) slightly > HTL E_v (5.137) - within tolerance
2025-09-23 04:17:16,326 - WARNING - W_R (5.2) slightly > HTL E_v (5.199) - within tolerance
2025-09-23 04:17:16,383 - WARNING - W_R (5.2) slightly > HTL E_v (5.192) - within tolerance
2025-09-23 04:17:16,442 - WARNING - W_R (5.2) slightly > HTL E_v (5.111) - within tolerance
2025-09-23 04:17:16,494 - WARNING - W_R (5.2) slightly > HTL E_v (5.125) - within tolerance
2025-09-23 04:17:16,545 - WARNING - W_R (5.2) slightly > HTL E_v (5.155) - within tolerance
2025-09-23 04:17:16,609 - WARNING - W_R (5.2) slightly > HTL E_v (5.181) - within tolerance
2025-09-23 04:17:16,662 - WARNING - W_R (5.2) slightly > HTL E_v (5.134) - within tolerance
2025-09-23 04:17:16,713 - WARNING - W_R (5.2) slightly > HTL E_v (5.141) - within tolerance
2025-09-23 04:17:16,770 - WARNING - W_R (5.2) slightly > HTL E_v (5.196) - within tolerance
2025-09-23 04:17:16,833 - WARNING - W_R (5.2) slightly > HTL E_v (5.177) - within tolerance
2025-09-23 04:17:16,898 - WARNING - W_R (5.2) slightly > HTL E_v (5.145) - within tolerance
2025-09-23 04:17:16,962 - WARNING - HARD ITERATION LIMIT REACHED: 50 >= 50
2025-09-23 04:17:16,963 - WARNING - STOPPING OPTIMIZATION (prevents runaway execution)
2025-09-23 04:17:17,671 - WARNING - Global optimization failed or poor result: Maximum number of iterations has been exceeded.
2025-09-23 04:17:17,671 - WARNING - W_R (5.2) slightly > HTL E_v (5.159) - within tolerance
2025-09-23 04:17:17,726 - INFO - 
=== Optimization Results ===
2025-09-23 04:17:17,727 - INFO - Optimized Performance - MPP: 145.0912 W/cm², PCE: 14.51%
2025-09-23 04:17:17,727 - INFO - Optimized Recombination: 1.51e+30
2025-09-23 04:17:17,727 - INFO - Physics Validation: All physics constraints satisfied
2025-09-23 04:17:17,727 - INFO - Improvements - MPP: +1380.29%, PCE: +1380.29%, Recombination: -8.21%
2025-09-23 04:17:17,728 - INFO - 
=== Step 5: Creating Optimization Visualizations ===
2025-09-23 04:17:21,192 - INFO - Created optimization table: results/8_optimize_device/6_optimization_table.png
2025-09-23 04:17:21,193 - INFO - Created optimization visualizations in results/8_optimize_device/
2025-09-23 04:17:21,193 - INFO - 
=== Step 6: Saving Optimization Results ===
2025-09-23 04:17:21,195 - INFO - Created ready-to-use format: example_device_parameters_optimized.json
2025-09-23 04:17:21,196 - INFO - To test: cp results/8_optimize_device/example_device_parameters_optimized.json example_device_parameters.json
2025-09-23 04:17:21,196 - INFO - Optimization results saved to results/8_optimize_device/
2025-09-23 04:17:21,196 - INFO - Optimized parameters: optimized_device_parameters.json
2025-09-23 04:17:21,196 - INFO - Detailed report: optimization_report.json
2025-09-23 04:17:21,196 - INFO - Ready-to-use format: example_device_parameters_optimized.json
2025-09-23 04:17:21,197 - INFO - 
=== OPTIMIZATION COMPLETE ===
2025-09-23 04:17:21,197 - INFO - Results saved to: results/8_optimize_device/
2025-09-23 04:17:21,197 - INFO - Optimized Parameters: optimized_device_parameters.json
2025-09-23 04:17:21,197 - INFO - Optimization Report: optimization_report.json
2025-09-23 04:17:21,197 - INFO - Comparison (MPP): 1_comparison_mpp.png
2025-09-23 04:17:21,198 - INFO - Comparison (PCE): 1_comparison_pce.png
2025-09-23 04:17:21,198 - INFO - Comparison (IntSRHn_mean): 1_comparison_intsrhn_mean.png
2025-09-23 04:17:21,198 - INFO - Thickness Optimization: 2_thickness_optimization.png
2025-09-23 04:17:21,198 - INFO - Energy Optimization: 3_energy_optimization.png
2025-09-23 04:17:21,198 - INFO - Doping Optimization: 4_doping_optimization.png
2025-09-23 04:17:21,199 - INFO - Improvements Summary: 5_performance_improvements.png
2025-09-23 04:17:21,199 - INFO - Comprehensive Table: 6_optimization_table.png
2025-09-23 04:17:21,199 - INFO - 
=== PERFORMANCE IMPROVEMENTS ===
2025-09-23 04:17:21,199 - INFO - MPP: +1380.29%
2025-09-23 04:17:21,199 - INFO - PCE: +1380.29%
2025-09-23 04:17:21,199 - INFO - Recombination: -8.21%
2025-09-23 04:17:21,200 - INFO - Status: Device optimization successful and manufacturable!

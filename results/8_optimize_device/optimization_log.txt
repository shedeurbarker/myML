2025-09-24 19:09:00,971 - INFO - === DEVICE PARAMETER OPTIMIZATION ===
2025-09-24 19:09:00,972 - INFO - Log file: results/8_optimize_device/optimization_log.txt
2025-09-24 19:09:00,972 - INFO - 
=== Step 1: Loading Example Parameters ===
2025-09-24 19:09:00,973 - INFO - Loaded example parameters from: example_device_parameters.json
2025-09-24 19:09:00,973 - INFO - Device Type: Perovskite Solar Cell (PCBM/MAPI/PEDOT)
2025-09-24 19:09:00,973 - INFO - 
=== Step 2: Loading Optimization Models ===
2025-09-24 19:09:01,414 - INFO - Loaded optimization models and feature definitions
2025-09-24 19:09:01,415 - INFO - 
=== Step 3: Validating Original Parameters ===
2025-09-24 19:09:01,415 - INFO - Original parameters validation: All physics constraints satisfied
2025-09-24 19:09:01,415 - INFO - 
=== Step 4: Optimizing Parameters (Method: both) ===
2025-09-24 19:09:01,415 - INFO - Progress counter: ENABLED (update every 5 iterations)
2025-09-24 19:09:01,415 - INFO - 
=== Starting Parameter Optimization ===
2025-09-24 19:09:01,415 - INFO - Method: both, Max iterations: 100
2025-09-24 19:09:01,416 - INFO - Converted L1_L bounds from nm to meters: [2e-08, 5.0000000000000004e-08]
2025-09-24 19:09:01,416 - INFO - Converted L2_L bounds from nm to meters: [2.1e-07, 3.5000000000000004e-07]
2025-09-24 19:09:01,417 - INFO - Converted L3_L bounds from nm to meters: [2e-08, 5.0000000000000004e-08]
2025-09-24 19:09:01,417 - INFO - Loaded bounds for 15 parameters
2025-09-24 19:09:01,418 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-24 19:09:01,431 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-24 19:09:01,435 - INFO - PCE prediction (19.92%) is within S-Q limit (33.7%) [VALID]
2025-09-24 19:09:01,436 - INFO - Original Performance - MPP: 199.1654 W/cm², PCE: 19.92%
2025-09-24 19:09:01,436 - INFO - Original Recombination: 3.03e+01
2025-09-24 19:09:01,436 - INFO - 
--- Local Optimization (L-BFGS-B) ---
2025-09-24 19:09:01,438 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-24 19:09:01,450 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-24 19:09:01,453 - INFO - PCE prediction (19.92%) is within S-Q limit (33.7%) [VALID]
2025-09-24 19:09:01,455 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-24 19:09:01,469 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-24 19:09:01,472 - INFO - PCE prediction (20.12%) is within S-Q limit (33.7%) [VALID]
2025-09-24 19:09:01,474 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-24 19:09:01,486 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-24 19:09:01,489 - INFO - PCE prediction (19.92%) is within S-Q limit (33.7%) [VALID]
2025-09-24 19:09:01,646 - WARNING - W_R (5.2) slightly > HTL E_v (5.200) - within tolerance
2025-09-24 19:09:01,899 - WARNING - W_R (5.2) slightly > HTL E_v (5.200) - within tolerance
2025-09-24 19:09:02,154 - WARNING - W_R (5.2) slightly > HTL E_v (5.200) - within tolerance
2025-09-24 19:09:02,217 - WARNING - HARD ITERATION LIMIT REACHED: 50 >= 50
2025-09-24 19:09:02,217 - WARNING - STOPPING OPTIMIZATION (prevents runaway execution)
2025-09-24 19:09:02,219 - INFO - Local optimization successful. Objective: 100000000.000000
2025-09-24 19:09:02,220 - INFO - 
--- Global Optimization (Differential Evolution) ---
2025-09-24 19:09:02,222 - WARNING - W_R (5.2) slightly > HTL E_v (5.184) - within tolerance
2025-09-24 19:09:02,222 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-24 19:09:02,236 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-24 19:09:02,238 - INFO - PCE prediction (19.18%) is within S-Q limit (33.7%) [VALID]
2025-09-24 19:09:02,241 - WARNING - W_R (5.2) slightly > HTL E_v (5.160) - within tolerance
2025-09-24 19:09:02,258 - WARNING - W_R (5.2) slightly > HTL E_v (5.163) - within tolerance
2025-09-24 19:09:02,276 - WARNING - W_R (5.2) slightly > HTL E_v (5.174) - within tolerance
2025-09-24 19:09:02,292 - WARNING - W_R (5.2) slightly > HTL E_v (5.182) - within tolerance
2025-09-24 19:09:02,309 - WARNING - W_R (5.2) slightly > HTL E_v (5.107) - within tolerance
2025-09-24 19:09:02,325 - WARNING - W_R (5.2) slightly > HTL E_v (5.110) - within tolerance
2025-09-24 19:09:02,342 - WARNING - W_R (5.2) slightly > HTL E_v (5.170) - within tolerance
2025-09-24 19:09:02,358 - WARNING - W_R (5.2) slightly > HTL E_v (5.145) - within tolerance
2025-09-24 19:09:02,375 - WARNING - W_R (5.2) slightly > HTL E_v (5.147) - within tolerance
2025-09-24 19:09:02,392 - WARNING - W_R (5.2) slightly > HTL E_v (5.137) - within tolerance
2025-09-24 19:09:02,409 - WARNING - W_R (5.2) slightly > HTL E_v (5.199) - within tolerance
2025-09-24 19:09:02,426 - WARNING - W_R (5.2) slightly > HTL E_v (5.192) - within tolerance
2025-09-24 19:09:02,443 - WARNING - W_R (5.2) slightly > HTL E_v (5.111) - within tolerance
2025-09-24 19:09:02,460 - WARNING - W_R (5.2) slightly > HTL E_v (5.125) - within tolerance
2025-09-24 19:09:02,476 - WARNING - W_R (5.2) slightly > HTL E_v (5.155) - within tolerance
2025-09-24 19:09:02,493 - WARNING - W_R (5.2) slightly > HTL E_v (5.181) - within tolerance
2025-09-24 19:09:02,510 - WARNING - W_R (5.2) slightly > HTL E_v (5.134) - within tolerance
2025-09-24 19:09:02,527 - WARNING - W_R (5.2) slightly > HTL E_v (5.141) - within tolerance
2025-09-24 19:09:02,543 - WARNING - W_R (5.2) slightly > HTL E_v (5.196) - within tolerance
2025-09-24 19:09:02,560 - WARNING - W_R (5.2) slightly > HTL E_v (5.177) - within tolerance
2025-09-24 19:09:02,577 - WARNING - W_R (5.2) slightly > HTL E_v (5.145) - within tolerance
2025-09-24 19:09:02,595 - WARNING - HARD ITERATION LIMIT REACHED: 50 >= 50
2025-09-24 19:09:02,595 - WARNING - STOPPING OPTIMIZATION (prevents runaway execution)
2025-09-24 19:09:03,229 - WARNING - Global optimization failed or poor result: Maximum number of iterations has been exceeded.
2025-09-24 19:09:03,241 - INFO - 
=== Optimization Results ===
2025-09-24 19:09:03,241 - INFO - Optimized Performance - MPP: 216.8584 W/cm², PCE: 21.69%
2025-09-24 19:09:03,242 - INFO - Optimized Recombination: 3.03e+01
2025-09-24 19:09:03,242 - INFO - Physics Validation: All physics constraints satisfied
2025-09-24 19:09:03,242 - INFO - Improvements - MPP: +8.88%, PCE: +8.88%, Recombination: +0.15%
2025-09-24 19:09:03,242 - INFO - 
=== Step 5: Creating Optimization Visualizations ===
2025-09-24 19:09:05,860 - INFO - Created optimization table: results/8_optimize_device/6_optimization_table.png
2025-09-24 19:09:05,861 - INFO - Created optimization visualizations in results/8_optimize_device/
2025-09-24 19:09:05,861 - INFO - 
=== Step 6: Saving Optimization Results ===
2025-09-24 19:09:05,864 - INFO - Created ready-to-use format: example_device_parameters_optimized.json
2025-09-24 19:09:05,864 - INFO - To test: cp results/8_optimize_device/example_device_parameters_optimized.json example_device_parameters.json
2025-09-24 19:09:05,865 - INFO - Optimization results saved to results/8_optimize_device/
2025-09-24 19:09:05,865 - INFO - Optimized parameters: optimized_device_parameters.json
2025-09-24 19:09:05,866 - INFO - Detailed report: optimization_report.json
2025-09-24 19:09:05,866 - INFO - Ready-to-use format: example_device_parameters_optimized.json
2025-09-24 19:09:05,867 - INFO - 
=== OPTIMIZATION COMPLETE ===
2025-09-24 19:09:05,867 - INFO - Results saved to: results/8_optimize_device/
2025-09-24 19:09:05,867 - INFO - Optimized Parameters: optimized_device_parameters.json
2025-09-24 19:09:05,868 - INFO - Optimization Report: optimization_report.json
2025-09-24 19:09:05,868 - INFO - MPP Comparison: 1a_mpp_comparison.png
2025-09-24 19:09:05,868 - INFO - PCE Comparison: 1b_pce_comparison.png
2025-09-24 19:09:05,868 - INFO - Recombination Comparison: 1c_recombination_comparison.png
2025-09-24 19:09:05,868 - INFO - Thickness Optimization: 2_thickness_optimization.png
2025-09-24 19:09:05,869 - INFO - Energy Optimization: 3_energy_optimization.png
2025-09-24 19:09:05,869 - INFO - Doping Optimization: 4_doping_optimization.png
2025-09-24 19:09:05,869 - INFO - Improvements Summary: 5_performance_improvements.png
2025-09-24 19:09:05,869 - INFO - Comprehensive Table: 6_optimization_table.png
2025-09-24 19:09:05,869 - INFO - 
=== PERFORMANCE IMPROVEMENTS ===
2025-09-24 19:09:05,870 - INFO - MPP: +8.88%
2025-09-24 19:09:05,870 - INFO - PCE: +8.88%
2025-09-24 19:09:05,870 - INFO - Recombination: +0.15%
2025-09-24 19:09:05,870 - INFO - Status: Device optimization successful and manufacturable!

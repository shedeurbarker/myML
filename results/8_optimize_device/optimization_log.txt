2025-09-25 02:59:50,376 - INFO - === DEVICE PARAMETER OPTIMIZATION ===
2025-09-25 02:59:50,377 - INFO - Log file: results/8_optimize_device/optimization_log.txt
2025-09-25 02:59:50,377 - INFO - 
=== Step 1: Loading Example Parameters ===
2025-09-25 02:59:50,378 - INFO - Loaded example parameters from: example_device_parameters.json
2025-09-25 02:59:50,378 - INFO - Device Type: Perovskite Solar Cell (PCBM/MAPI/PEDOT)
2025-09-25 02:59:50,378 - INFO - 
=== Step 2: Loading Optimization Models ===
2025-09-25 02:59:50,772 - INFO - Loaded optimization models and feature definitions
2025-09-25 02:59:50,772 - INFO - 
=== Step 3: Validating Original Parameters ===
2025-09-25 02:59:50,773 - INFO - Original parameters validation: All physics constraints satisfied
2025-09-25 02:59:50,773 - INFO - 
=== Step 4: Optimizing Parameters (Method: both) ===
2025-09-25 02:59:50,773 - INFO - Progress counter: ENABLED (update every 5 iterations)
2025-09-25 02:59:50,773 - INFO - 
=== Starting Parameter Optimization ===
2025-09-25 02:59:50,774 - INFO - Method: both, Max iterations: 100
2025-09-25 02:59:50,774 - INFO - Converted L1_L bounds from nm to meters: [2e-08, 5.0000000000000004e-08]
2025-09-25 02:59:50,774 - INFO - Converted L2_L bounds from nm to meters: [2.1e-07, 3.5000000000000004e-07]
2025-09-25 02:59:50,775 - INFO - Converted L3_L bounds from nm to meters: [2e-08, 5.0000000000000004e-08]
2025-09-25 02:59:50,775 - INFO - Loaded bounds for 15 parameters
2025-09-25 02:59:50,776 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-25 02:59:50,788 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-25 02:59:50,792 - INFO - PCE prediction (19.92%) is within S-Q limit (33.7%) [VALID]
2025-09-25 02:59:50,794 - INFO - Original Performance - MPP: 199.1654 W/cm², PCE: 19.92%
2025-09-25 02:59:50,794 - INFO - Original Recombination: 3.03e+01
2025-09-25 02:59:50,794 - INFO - 
--- Local Optimization (L-BFGS-B) ---
2025-09-25 02:59:50,796 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-25 02:59:50,808 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-25 02:59:50,811 - INFO - PCE prediction (19.92%) is within S-Q limit (33.7%) [VALID]
2025-09-25 02:59:50,814 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-25 02:59:50,826 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-25 02:59:50,829 - INFO - PCE prediction (20.12%) is within S-Q limit (33.7%) [VALID]
2025-09-25 02:59:50,832 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-25 02:59:50,844 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-25 02:59:50,846 - INFO - PCE prediction (19.92%) is within S-Q limit (33.7%) [VALID]
2025-09-25 02:59:51,066 - WARNING - W_R (5.2) slightly > HTL E_v (5.200) - within tolerance
2025-09-25 02:59:51,308 - WARNING - W_R (5.2) slightly > HTL E_v (5.200) - within tolerance
2025-09-25 02:59:51,550 - WARNING - W_R (5.2) slightly > HTL E_v (5.200) - within tolerance
2025-09-25 02:59:51,612 - WARNING - HARD ITERATION LIMIT REACHED: 50 >= 50
2025-09-25 02:59:51,613 - WARNING - STOPPING OPTIMIZATION (prevents runaway execution)
2025-09-25 02:59:51,615 - INFO - Local optimization successful. Objective: 100000000.000000
2025-09-25 02:59:51,615 - INFO - 
--- Global Optimization (Differential Evolution) ---
2025-09-25 02:59:51,617 - WARNING - W_R (5.2) slightly > HTL E_v (5.184) - within tolerance
2025-09-25 02:59:51,618 - INFO - Calculating derived features (Script 7 compatible)...
2025-09-25 02:59:51,631 - INFO - Calculated derived features (Script 7 compatible). Total features: 39
2025-09-25 02:59:51,634 - INFO - PCE prediction (19.18%) is within S-Q limit (33.7%) [VALID]
2025-09-25 02:59:51,636 - WARNING - W_R (5.2) slightly > HTL E_v (5.160) - within tolerance
2025-09-25 02:59:51,653 - WARNING - W_R (5.2) slightly > HTL E_v (5.163) - within tolerance
2025-09-25 02:59:51,670 - WARNING - W_R (5.2) slightly > HTL E_v (5.174) - within tolerance
2025-09-25 02:59:51,685 - WARNING - W_R (5.2) slightly > HTL E_v (5.182) - within tolerance
2025-09-25 02:59:51,702 - WARNING - W_R (5.2) slightly > HTL E_v (5.107) - within tolerance
2025-09-25 02:59:51,718 - WARNING - W_R (5.2) slightly > HTL E_v (5.110) - within tolerance
2025-09-25 02:59:51,735 - WARNING - W_R (5.2) slightly > HTL E_v (5.170) - within tolerance
2025-09-25 02:59:51,751 - WARNING - W_R (5.2) slightly > HTL E_v (5.145) - within tolerance
2025-09-25 02:59:51,767 - WARNING - W_R (5.2) slightly > HTL E_v (5.147) - within tolerance
2025-09-25 02:59:51,783 - WARNING - W_R (5.2) slightly > HTL E_v (5.137) - within tolerance
2025-09-25 02:59:51,800 - WARNING - W_R (5.2) slightly > HTL E_v (5.199) - within tolerance
2025-09-25 02:59:51,818 - WARNING - W_R (5.2) slightly > HTL E_v (5.192) - within tolerance
2025-09-25 02:59:51,835 - WARNING - W_R (5.2) slightly > HTL E_v (5.111) - within tolerance
2025-09-25 02:59:51,851 - WARNING - W_R (5.2) slightly > HTL E_v (5.125) - within tolerance
2025-09-25 02:59:51,868 - WARNING - W_R (5.2) slightly > HTL E_v (5.155) - within tolerance
2025-09-25 02:59:51,884 - WARNING - W_R (5.2) slightly > HTL E_v (5.181) - within tolerance
2025-09-25 02:59:51,901 - WARNING - W_R (5.2) slightly > HTL E_v (5.134) - within tolerance
2025-09-25 02:59:51,917 - WARNING - W_R (5.2) slightly > HTL E_v (5.141) - within tolerance
2025-09-25 02:59:51,934 - WARNING - W_R (5.2) slightly > HTL E_v (5.196) - within tolerance
2025-09-25 02:59:51,952 - WARNING - W_R (5.2) slightly > HTL E_v (5.177) - within tolerance
2025-09-25 02:59:51,969 - WARNING - W_R (5.2) slightly > HTL E_v (5.145) - within tolerance
2025-09-25 02:59:51,985 - WARNING - HARD ITERATION LIMIT REACHED: 50 >= 50
2025-09-25 02:59:51,986 - WARNING - STOPPING OPTIMIZATION (prevents runaway execution)
2025-09-25 02:59:52,622 - WARNING - Global optimization failed or poor result: Maximum number of iterations has been exceeded.
2025-09-25 02:59:52,634 - INFO - 
=== Optimization Results ===
2025-09-25 02:59:52,634 - INFO - Optimized Performance - MPP: 216.8584 W/cm², PCE: 21.69%
2025-09-25 02:59:52,635 - INFO - Optimized Recombination: 3.03e+01
2025-09-25 02:59:52,635 - INFO - Physics Validation: All physics constraints satisfied
2025-09-25 02:59:52,635 - INFO - Improvements - MPP: +8.88%, PCE: +8.88%, Recombination: +0.15%
2025-09-25 02:59:52,635 - INFO - 
=== Step 5: Creating Optimization Visualizations ===
2025-09-25 02:59:55,205 - INFO - Created optimization table: results/8_optimize_device/6_optimization_table.png
2025-09-25 02:59:55,205 - INFO - Created optimization visualizations in results/8_optimize_device/
2025-09-25 02:59:55,206 - INFO - 
=== Step 6: Saving Optimization Results ===
2025-09-25 02:59:55,208 - INFO - Created ready-to-use format: example_device_parameters_optimized.json
2025-09-25 02:59:55,209 - INFO - To test: cp results/8_optimize_device/example_device_parameters_optimized.json example_device_parameters.json
2025-09-25 02:59:55,209 - INFO - Optimization results saved to results/8_optimize_device/
2025-09-25 02:59:55,209 - INFO - Optimized parameters: optimized_device_parameters.json
2025-09-25 02:59:55,209 - INFO - Detailed report: optimization_report.json
2025-09-25 02:59:55,209 - INFO - Ready-to-use format: example_device_parameters_optimized.json
2025-09-25 02:59:55,210 - INFO - 
=== OPTIMIZATION COMPLETE ===
2025-09-25 02:59:55,210 - INFO - Results saved to: results/8_optimize_device/
2025-09-25 02:59:55,211 - INFO - Optimized Parameters: optimized_device_parameters.json
2025-09-25 02:59:55,211 - INFO - Optimization Report: optimization_report.json
2025-09-25 02:59:55,211 - INFO - MPP Comparison: 1a_mpp_comparison.png
2025-09-25 02:59:55,211 - INFO - PCE Comparison: 1b_pce_comparison.png
2025-09-25 02:59:55,211 - INFO - Recombination Comparison: 1c_recombination_comparison.png
2025-09-25 02:59:55,211 - INFO - Thickness Optimization: 2_thickness_optimization.png
2025-09-25 02:59:55,212 - INFO - Energy Optimization: 3_energy_optimization.png
2025-09-25 02:59:55,212 - INFO - Doping Optimization: 4_doping_optimization.png
2025-09-25 02:59:55,212 - INFO - Improvements Summary: 5_performance_improvements.png
2025-09-25 02:59:55,212 - INFO - Comprehensive Table: 6_optimization_table.png
2025-09-25 02:59:55,213 - INFO - 
=== PERFORMANCE IMPROVEMENTS ===
2025-09-25 02:59:55,213 - INFO - MPP: +8.88%
2025-09-25 02:59:55,213 - INFO - PCE: +8.88%
2025-09-25 02:59:55,213 - INFO - Recombination: +0.15%
2025-09-25 02:59:55,213 - INFO - Status: Device optimization successful and manufacturable!

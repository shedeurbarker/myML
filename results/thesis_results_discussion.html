<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Results and Discussion</title>
        <style>
            :root {
                --bg: #ffffff;
                --text: #111418;
                --muted: #5b6470;
                --accent: #0b6cff;
                --border: #e6e8eb;
                --table-stripe: #fafbfc;
            }
            html,
            body {
                margin: 0;
                padding: 0;
                background: var(--bg);
                color: var(--text);
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",
                    Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
                line-height: 1.55;
            }
            .container {
                max-width: 980px;
                padding: 32px 20px 80px;
                margin: 0 auto;
            }
            h1,
            h2,
            h3 {
                line-height: 1.2;
                margin: 1.2em 0 0.5em;
            }
            h1 {
                font-size: 32px;
            }
            h2 {
                font-size: 24px;
                border-bottom: 1px solid var(--border);
                padding-bottom: 8px;
            }
            h3 {
                font-size: 19px;
                color: var(--text);
            }
            p {
                margin: 0.6em 0;
                color: var(--text);
            }
            .muted {
                color: var(--muted);
            }
            a {
                color: var(--accent);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
            ul {
                margin: 0.5em 0 0.5em 1.2em;
            }
            .meta {
                margin-top: 4px;
                font-size: 13px;
                color: var(--muted);
            }
            .card {
                border: 1px solid var(--border);
                border-radius: 12px;
                padding: 16px 18px;
                background: #fff;
                margin: 16px 0;
            }
            .grid {
                display: grid;
                grid-template-columns: repeat(12, 1fr);
                gap: 16px;
            }
            .grid-6 {
                grid-column: span 6;
            }
            .grid-12 {
                grid-column: span 12;
            }
            figure {
                margin: 16px 0;
            }
            figcaption {
                font-size: 13px;
                color: var(--muted);
                margin-top: 6px;
            }
            img {
                max-width: 100%;
                height: auto;
                border: 1px solid var(--border);
                border-radius: 8px;
            }
            table {
                width: 100%;
                border-collapse: collapse;
                margin: 10px 0 2px;
            }
            th,
            td {
                text-align: left;
                padding: 10px 10px;
                border-bottom: 1px solid var(--border);
                vertical-align: top;
            }
            thead th {
                background: #fff;
                position: sticky;
                top: 0;
            }
            tbody tr:nth-child(odd) {
                background: var(--table-stripe);
            }
            .small {
                font-size: 13px;
            }
            .tag {
                display: inline-block;
                font-size: 12px;
                padding: 2px 8px;
                border-radius: 999px;
                border: 1px solid var(--border);
                color: var(--muted);
            }
            .kpi {
                display: inline-block;
                padding: 8px 12px;
                border-radius: 8px;
                border: 1px solid var(--border);
                margin-right: 8px;
                font-variant-numeric: tabular-nums;
                background: #fff;
            }
            .footer {
                margin-top: 48px;
                padding-top: 16px;
                border-top: 1px solid var(--border);
                font-size: 13px;
                color: var(--muted);
            }
            .caption {
                color: var(--muted);
                font-size: 13px;
                margin-top: 0;
            }
            .note {
                background: #f7fafc;
                border: 1px solid #e6eefc;
                color: #2b3645;
                padding: 10px 12px;
                border-radius: 8px;
            }
            .nowrap {
                white-space: nowrap;
            }
        </style>
        <meta name="description" content="Results and Discussion for device optimization study." />
    </head>
    <body>
        <div class="container">
            <h1>Results and Discussion</h1>
            <p class="meta">
                Generated: 2025-09-24 • Source data in <code>results/</code> and
                <code>results/8_optimize_device/</code>
            </p>

            <h2 id="results">Results</h2>

            <div class="card">
                <h3>Dataset Preparation</h3>
                <p>
                    We constructed a dataset of <strong>9,950 samples</strong> with
                    <strong>38 base features</strong> and
                    <strong>18 engineered physics-informed features</strong>. Data validation
                    confirmed integrity (missing values handled, outliers clipped, physics
                    constraints validated).
                </p>
                <p class="small muted">
                    Reference: <code>results/4_prepare_ml_data/dataset_metadata.json</code>
                </p>
            </div>

            <div class="card">
                <h3>Model Performance</h3>
                <p>
                    The XGBoost models were selected based on cross-validation and held-out
                    performance.
                </p>
                <table>
                    <thead>
                        <tr>
                            <th>Target</th>
                            <th>Validation</th>
                            <th>Held-out Test (selected)</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>MPP</code> (efficiency)</td>
                            <td>R²=0.9987, RMSE=6.98, MAE=2.06</td>
                            <td>R²=0.9998, RMSE=2.58, MAE=1.40 (XGBoost)</td>
                            <td>Strong generalization; used as optimization objective.</td>
                        </tr>
                        <tr>
                            <td><code>IntSRHn_mean</code> (recombination)</td>
                            <td>R²=0.8735 (large absolute errors due to scale)</td>
                            <td>R²=0.9967 (XGBoost)</td>
                            <td>Interpreted comparatively and for physics consistency.</td>
                        </tr>
                    </tbody>
                </table>
                <p class="small muted">
                    References: <code>results/6_model_performance/performance_summary.json</code>,
                    <code>results/5_train_optimization_models/training_metadata.json</code>
                </p>
            </div>

            <div class="card">
                <h3>Experimental Device Prediction</h3>
                <p>
                    For the PCBM/MAPI/PEDOT stack, physics constraints were satisfied. Predicted
                    performance indicates a high-efficiency device.
                </p>
                <div>
                    <span class="kpi">PCE: <strong>19.92%</strong></span>
                    <span class="kpi"
                        >MPP: <strong>199.17</strong>
                        <span class="small muted">(per-area power, consistent units)</span></span
                    >
                    <span class="kpi"
                        >Recombination: <strong>≈30.29</strong>
                        <span class="small muted">(low)</span></span
                    >
                </div>
                <p class="small muted">
                    Reference:
                    <code>results/7_experimental_predictions/prediction_report.json</code>
                </p>
            </div>

            <div class="card">
                <h3>Optimization Outcome</h3>
                <p>
                    Optimization improved performance while maintaining manufacturability and
                    physics validity (S-Q limit respected).
                </p>
                <div>
                    <span class="kpi"
                        >PCE: <strong>21.69%</strong>
                        <span class="small muted">(+8.88%)</span></span
                    >
                    <span class="kpi"
                        >MPP: <strong>216.86</strong>
                        <span class="small muted">(+8.88%)</span></span
                    >
                    <span class="kpi"
                        >Recombination: <strong>+0.15%</strong>
                        <span class="small muted">(negligible)</span></span
                    >
                </div>

                <h4>Parameter Changes (Original → Optimized)</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Original</th>
                            <th>Optimized</th>
                            <th>Δ (abs)</th>
                            <th>Δ (%)</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ETL thickness <code>L1_L</code></td>
                            <td>20.0 nm</td>
                            <td>37.4 nm</td>
                            <td>+17.4 nm</td>
                            <td>+87.17%</td>
                            <td>Improves transport/extraction balance</td>
                        </tr>
                        <tr>
                            <td>Absorber thickness <code>L2_L</code></td>
                            <td>350.0 nm</td>
                            <td>268.6 nm</td>
                            <td>−81.4 nm</td>
                            <td>−23.25%</td>
                            <td>Reduces parasitic losses</td>
                        </tr>
                        <tr>
                            <td>HTL thickness <code>L3_L</code></td>
                            <td>20.0 nm</td>
                            <td>37.4 nm</td>
                            <td>+17.4 nm</td>
                            <td>+87.17%</td>
                            <td>Improves hole transport</td>
                        </tr>
                        <tr>
                            <td>ETL conduction band <code>L1_E_c</code></td>
                            <td>3.80 eV</td>
                            <td>3.916 eV</td>
                            <td>+0.116 eV</td>
                            <td>+3.07%</td>
                            <td>Improves band alignment</td>
                        </tr>
                        <tr>
                            <td>Other parameters</td>
                            <td colspan="4">No substantive change</td>
                            <td>Alignment and thickness were first-order levers</td>
                        </tr>
                    </tbody>
                </table>
                <p class="small muted">
                    References: <code>results/8_optimize_device/optimization_report.json</code>,
                    <code>optimized_device_parameters.json</code>
                </p>
                <p class="note small">
                    Ready-to-use configuration:
                    <a href="8_optimize_device/example_device_parameters_optimized.json"
                        >8_optimize_device/example_device_parameters_optimized.json</a
                    >
                </p>
            </div>

            <h2 id="discussion">Discussion</h2>

            <div class="card">
                <h3>Model Fidelity and Uncertainty</h3>
                <ul>
                    <li>
                        <strong>Efficiency model</strong>: Near-ideal predictive fidelity on
                        synthetic data; suitable for optimization.
                    </li>
                    <li>
                        <strong>Recombination model</strong>: High R² but large absolute errors due
                        to target scaling; best for comparative analysis and physics sanity checks.
                    </li>
                    <li>
                        <strong>Controls</strong>: Robust scaling, outlier clipping, and 5-fold CV
                        helped mitigate overfitting; CV and held-out metrics are consistent.
                    </li>
                </ul>
            </div>

            <div class="card">
                <h3>Physics Consistency</h3>
                <ul>
                    <li>
                        Energy alignment maintained: <span class="nowrap">ETL_Ec ≥ Active_Ec</span>,
                        <span class="nowrap">Active_Ev ≥ HTL_Ev</span>.
                    </li>
                    <li>
                        Electrode compatibility satisfied; minor W_R vs. HTL E_v warnings remained
                        within tolerance.
                    </li>
                    <li>
                        Optimized ETL <em>E<sub>c</sub></em> and thicknesses improve transport
                        balance without violating constraints.
                    </li>
                </ul>
            </div>

            <div class="card">
                <h3>Design Insights</h3>
                <ul>
                    <li>
                        <strong>Thickness tuning dominates</strong>: Thicker transport layers (~20 →
                        ~37 nm) and a moderately thinner absorber (~350 → ~269 nm) raise
                        <code>MPP</code> and <code>PCE</code>.
                    </li>
                    <li>
                        <strong>Energy-level nudging</strong> (ETL <em>E<sub>c</sub></em
                        >) provides incremental gains via improved conduction band alignment.
                    </li>
                    <li>
                        <strong>Doping</strong>: Minimal changes in the best solution; geometry and
                        alignment are primary levers for this stack.
                    </li>
                </ul>
            </div>

            <div class="card">
                <h3>Practical Implications</h3>
                <ul>
                    <li>
                        Achieved <strong>+8.88%</strong> uplift to <strong>21.69% PCE</strong>, well
                        below the Shockley–Queisser limit (33.7%).
                    </li>
                    <li>
                        Parameters remain within manufacturable ranges; ready-to-use file enables
                        immediate replication.
                    </li>
                </ul>
            </div>

            <div class="card">
                <h3>Limitations and Future Work</h3>
                <ul>
                    <li>
                        Simulation-based results may require calibration to experimental realities
                        (material quality, interfacial recombination, contact resistances).
                    </li>
                    <li>
                        Extend to multi-objective optimization (e.g., performance vs. stability,
                        process tolerance) and add uncertainty quantification.
                    </li>
                    <li>
                        Augment physics with ion migration, interfacial recombination velocities,
                        and grain-boundary effects for finer guidance.
                    </li>
                </ul>
            </div>

            <h2 id="figures">Figures</h2>
            <div class="grid">
                <div class="grid-6">
                    <figure>
                        <img src="8_optimize_device/1a_mpp_comparison.png" alt="MPP comparison" />
                        <figcaption>
                            Fig. 1a — Comparison of MPP before and after optimization.
                        </figcaption>
                    </figure>
                </div>
                <div class="grid-6">
                    <figure>
                        <img src="8_optimize_device/1b_pce_comparison.png" alt="PCE comparison" />
                        <figcaption>
                            Fig. 1b — Comparison of PCE before and after optimization.
                        </figcaption>
                    </figure>
                </div>
                <div class="grid-6">
                    <figure>
                        <img
                            src="8_optimize_device/1c_recombination_comparison.png"
                            alt="Recombination comparison"
                        />
                        <figcaption>
                            Fig. 1c — Comparison of IntSRHn_mean before and after optimization.
                        </figcaption>
                    </figure>
                </div>
                <div class="grid-6">
                    <figure>
                        <img
                            src="8_optimize_device/2_thickness_optimization.png"
                            alt="Thickness optimization"
                        />
                        <figcaption>
                            Fig. 2 — Sensitivity of PCE to layer thickness; optimized point
                            highlighted.
                        </figcaption>
                    </figure>
                </div>
                <div class="grid-6">
                    <figure>
                        <img
                            src="8_optimize_device/3_energy_optimization.png"
                            alt="Energy optimization"
                        />
                        <figcaption>
                            Fig. 3 — Sensitivity of PCE to energy-level parameters.
                        </figcaption>
                    </figure>
                </div>
                <div class="grid-6">
                    <figure>
                        <img
                            src="8_optimize_device/4_doping_optimization.png"
                            alt="Doping optimization"
                        />
                        <figcaption>Fig. 4 — Sensitivity of PCE to doping parameters.</figcaption>
                    </figure>
                </div>
                <div class="grid-12">
                    <figure>
                        <img
                            src="8_optimize_device/5_performance_improvements.png"
                            alt="Performance improvements"
                        />
                        <figcaption>
                            Fig. 5 — Summary of performance improvements after optimization.
                        </figcaption>
                    </figure>
                </div>
                <div class="grid-12">
                    <figure>
                        <img
                            src="8_optimize_device/6_optimization_table.png"
                            alt="Optimization table"
                        />
                        <figcaption>
                            Table 1 — Optimized parameters vs. original with relative changes.
                        </figcaption>
                    </figure>
                </div>
            </div>

            <div class="footer">
                <p>
                    Artifacts:
                    <a href="8_optimize_device/optimization_report.json"
                        >optimization_report.json</a
                    >
                    • <a href="8_optimize_device/optimization_log.txt">optimization_log.txt</a> •
                    <a href="8_optimize_device/optimized_device_parameters.json"
                        >optimized_device_parameters.json</a
                    >
                    •
                    <a href="8_optimize_device/example_device_parameters_optimized.json"
                        >example_device_parameters_optimized.json</a
                    >
                </p>
            </div>
        </div>
    </body>
    <!-- End of Results and Discussion -->
</html>
